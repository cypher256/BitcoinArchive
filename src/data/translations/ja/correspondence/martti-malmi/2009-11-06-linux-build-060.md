---
title: "返信: Linuxビルド"
date: 2009-11-06T06:20:15Z
source: correspondence
sourceUrl: "https://mmalmi.github.io/satoshi/"
author: "Satoshi Nakamoto"
participants:
  - name: "Satoshi Nakamoto"
    slug: "satoshi-nakamoto"
  - name: "Martti Malmi"
    slug: "martti-malmi"
description: "Linuxビルドの安定性についての報告。wxWidgetsのスレッドセーフティの問題、ポートバインドの問題、xpmアイコンやデータベースファイルのWindows互換性についての議論。"
isSatoshi: true
threadId: "satoshi-martti-malmi"
threadTitle: "Satoshi ↔ Martti Malmi Correspondence"
threadPosition: 60
tags:
  - "correspondence"
  - "early-contributor"
  - "linux"
  - "development"
secondarySources:
  - name: "Martti Malmi's Published Email Archive"
    url: "https://mmalmi.github.io/satoshi/"
  - name: "COPA v. Wright Trial Exhibits"
    url: "https://www.opencrypto.org/2024-02-22-witnesses-satoshi-correspondence/"
translationStatus: complete
---

Linux上で安定して動作するようになりました。ただし、GUIスレッド外でwxMessageBox()を使用するとクラッシュします。非GUIスレッドはLinuxではウィンドウを開けないためです。まだその修正には取り掛かっていません。ストレステストを実行していますが、正常に動作しています。

wxWidgetsの大部分はUIスレッド以外のスレッドで使用するとスレッドセーフではありませんが、経験則としてWindowsではUI関連でないものは大丈夫です。GTKではさらにスレッドアンセーフであることが判明しました。一度に多くのものを置き換えたので、一つのもの（おそらくRepaint）だけが原因だったのかは分かりませんが、wxStringを使うwx関数でさえもUIスレッド外では安全でないと想定する必要があります。これでwxWidgetsの便利なポータビリティサポート関数がすべて使えなくなりました。ソースを確認して全て数値処理であるwxThread::GetCPUCount()のような単純なものは残しましたし、wxMutexは安全でなければ使い物にならないので安全なはずです。

終了して直後に再度起動すると、ポート8333をバインドできないという問題があります。ポートは約1分後に解放されます。何か見落としがない限り、終了前にソケットを閉じているので、他に何ができるか分かりません。おそらくLinuxではバインドしたポートの解放に1分かかるということなのでしょう。トロイの木馬がWebサーバーを殺して素早くその場所に入り込み、クライアントのリトライを全て拾うことを防ぐためのセキュリティ機能かもしれません。

アイコンのxpmバージョンを正しく作成する方法をまだ調べる必要があります。

データベースのdatファイルがWindowsと互換性があるかどうか気になります。

*出典：COPA対Wright裁判の証言の一環として、2024年2月にMartti MalmiによりGitHubで公開。完全な書簡アーカイブはmmalmi.github.io/satoshi/で閲覧可能。*
