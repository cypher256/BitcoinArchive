---
title: "linux-0.1.6-test7"
date: 2009-11-17T03:41:26Z
source: correspondence
sourceUrl: "https://mmalmi.github.io/satoshi/"
author: "Satoshi Nakamoto"
participants:
  - name: "Satoshi Nakamoto"
    slug: "satoshi-nakamoto"
  - name: "Martti Malmi"
    slug: "martti-malmi"
description: "念のため、実行前にデータディレクトリをバックアップしてください。"
isSatoshi: true
threadId: "satoshi-martti-malmi"
threadTitle: "Satoshi ↔ Martti Malmi Correspondence"
threadPosition: 91
tags:
  - "correspondence"
  - "early-contributor"
  - "linux"
secondarySources:
  - name: "Martti Malmi's Published Email Archive"
    url: "https://mmalmi.github.io/satoshi/"
  - name: "COPA v. Wright Trial Exhibits"
    url: "https://www.opencrypto.org/2024-02-22-witnesses-satoshi-correspondence/"
translationStatus: complete
---

test 7：

念のため、実行前にデータディレクトリをバックアップしてください。

Db::open/Db::close「Bad file descriptor」例外の回避策です。初期ブロックダウンロードも高速化される可能性があります。回避策は、データベースハンドルを開いたままプログラムの実行中ずっと保持しておくことで、実際これはより一般的なやり方でもあります。常に閉じたり開いたりしなければ、エラーが発生する機会がなくなるはずです。

唯一の例外はwallet.datで、書き込み完了後にトランザクションログをdatファイルにフラッシュするために閉じるようにしています。これにより、datファイルが単体で有効になります。Bitcoinの実行中に誰かがバックアップを取った場合、データベースのトランザクションログなしでもそれ自体で有効なwallet.datを取得できます。

これはデータベース処理の再構成なので、新たなデッドロックが見つかるかもしれません。通常、デッドロックが発生すると、UIの再描画が止まるか、まだGeneratingと表示されているにもかかわらずCPUを使用しなくなります。

*出典：COPA対Wright裁判の証言の一環として、2024年2月にMartti MalmiによりGitHubで公開。完全な書簡アーカイブはmmalmi.github.io/satoshi/で閲覧可能。*
