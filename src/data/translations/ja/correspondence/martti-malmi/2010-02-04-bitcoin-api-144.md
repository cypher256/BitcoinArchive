---
title: "返信: Bitcoin API"
date: 2010-02-04T17:47:36Z
source: correspondence
sourceUrl: "https://mmalmi.github.io/satoshi/"
author: "Martti Malmi"
participants:
  - name: "Satoshi Nakamoto"
    slug: "satoshi-nakamoto"
  - name: "Martti Malmi"
    slug: "martti-malmi"
description: "「ldd bitcoin」の実行結果です。見つからないのはやはりgtkライブラリのようです。"
isSatoshi: false
threadId: "satoshi-martti-malmi"
threadTitle: "Satoshi ↔ Martti Malmi Correspondence"
threadPosition: 144
tags:
  - "correspondence"
  - "early-contributor"
  - "api"
secondarySources:
  - name: "Martti Malmi's Published Email Archive"
    url: "https://mmalmi.github.io/satoshi/"
  - name: "COPA v. Wright Trial Exhibits"
    url: "https://www.opencrypto.org/2024-02-22-witnesses-satoshi-correspondence/"
translationStatus: complete
---

> 不足している共有ライブラリが何か調べる方法はありますか？
> 分かると助かります。

「ldd bitcoin」の実行結果はこちらです:

         linux-gate.so.1 =>  (0xf778c000)
         libcrypto.so.0.9.8 => /usr/lib32/i686/cmov/libcrypto.so.0.9.8
(0xf762a000)
         libgtk-x11-2.0.so.0 => not found
         libgthread-2.0.so.0 => not found
         libSM.so.6 => /usr/lib32/libSM.so.6 (0xf7621000)
         libstdc++.so.6 => /usr/lib32/libstdc++.so.6 (0xf7533000)
         libm.so.6 => /lib32/libm.so.6 (0xf750f000)
         libgcc_s.so.1 => /usr/lib32/libgcc_s.so.1 (0xf7502000)
         libc.so.6 => /lib32/libc.so.6 (0xf73b0000)
         libdl.so.2 => /lib32/libdl.so.2 (0xf73ac000)
         libgdk-x11-2.0.so.0 => not found
         libXinerama.so.1 => /usr/lib32/libXinerama.so.1 (0xf73a8000)
         libgdk_pixbuf-2.0.so.0 => not found
         libX11.so.6 => /usr/lib32/libX11.so.6 (0xf72b9000)
         libpango-1.0.so.0 => not found
         libgobject-2.0.so.0 => not found
         libglib-2.0.so.0 => not found
         libpthread.so.0 => /lib32/libpthread.so.0 (0xf72a1000)
         libpng12.so.0 => /usr/lib32/libpng12.so.0 (0xf727e000)
         libz.so.1 => /usr/lib32/libz.so.1 (0xf7269000)
         libICE.so.6 => /usr/lib32/libICE.so.6 (0xf7251000)
         /lib/ld-linux.so.2 (0xf778d000)
         libXext.so.6 => /usr/lib32/libXext.so.6 (0xf7243000)
         libxcb-xlib.so.0 => /usr/lib32/libxcb-xlib.so.0 (0xf7241000)
         libxcb.so.1 => /usr/lib32/libxcb.so.1 (0xf7229000)
         libXau.so.6 => /usr/lib32/libXau.so.6 (0xf7226000)
         libXdmcp.so.6 => /usr/lib32/libXdmcp.so.6 (0xf7220000)

見つからないのはやはりgtkライブラリのようです。/usr/libフォルダにはそれらのファイルがありますが、64ビットなので無視されているか、/usr/lib32のみが検索されているのかもしれません。他の64ビットマシンではテストしていません。

> 私の64ビット（デバッグ情報除去済み）実行ファイルを添付します。
> まだSVNにないテストされていない変更が含まれています: UIの変更と
> ウォレットのfSpentフラグ再同期の処理です。

パッケージが開けません、「gzip形式ではありません」と表示されます。

> ローカルからのみアクセスできるソケットを開くことは可能ですか？

はい、ローカル専用のIPCソケット（「Unixドメインソケット」）を使えます。wx-apiではポート番号の代わりにファイル名を使用することでそれが実現されています。wxServer-Client通信の使用例をコミットしました。必要であれば元に戻してください。現在、実行中のインスタンスにブロックチェーンの長さを問い合わせる-blockamountコマンドラインオプションがあります。

このコマンドライン方式はPHPからもすでに使えると思いますが、PHP自体がソケットサーバーに直接アクセスできた方が軽量かもしれません。wxのIPCの概要では、wxSocketEvent、wxSocketBase、wxSocketClient、wxSocketServerが「低レベルTCP/IP APIのクラス」として挙げられており、今回使ったもの（wxServer、wxClient、wxConnection）よりもPHPからは使いやすいかもしれません。もう少し調べてみます。

*出典：COPA対Wright裁判の証言の一環として、2024年2月にMartti MalmiによりGitHubで公開。完全な書簡アーカイブはmmalmi.github.io/satoshi/で閲覧可能。*
